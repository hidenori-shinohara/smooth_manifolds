\begin{customexer}{2.1}
  Let $M$ be a smooth manifold with or without boundary.
  Show that pointwise multiplication turns $C^{\infty}(M)$ into a commutative ring and a commutative and associative algebra over $\mathbb{R}$.
\end{customexer}

\begin{proof}
  $ $
  \begin{itemize}
    \item
      The constant map $f(p) = 0$ is clearly in $C^{\infty}(M)$ and it is the additive identity.
    \item
      The constant map $f(p) = 1$ is clearly in $C^{\infty}(M)$ and it is the multiplicative identity.
    \item
      Let $f \in C^{\infty}(M), g \in C^{\infty}(M)$.
      Let $p \in M$ and $(\phi, U)$ be a smooth chart for $p$.
      Then $f \circ \phi^{-1}$ and $g \circ \phi^{-1}$ are both smooth(Exercise \ref{ex_2_3}), real-valued maps defined on an open subset of $\mathbb{R}^n$.
      Thus $f + g$ is in $C^{\infty}(M)$ 
      Moreover, $f + g = g + f$ because addition in $\mathbb{R}$ is commutative.
    \item
      Let $f, g, h \in C^{\infty}(M)$.
      Let $p \in M$ and $(\phi, U)$ be a smooth chart for $p$.
      Then $f \circ \phi^{-1}$ and $g \circ \phi^{-1}$ are both smooth(Exercise \ref{ex_2_3}), real-valued maps defined on an open subset of $\mathbb{R}^n$.
      Therefore, $fg$ is in $C^{\infty}(M)$
      Moreover, $fg = gf$ and $(fg)h = f(gh)$ because multiplication in $\mathbb{R}$ is commutative and associative.
    \item
      Let $c \in \mathbb{R}, f \in C^{\infty}(M)$.
      Then $cf$ can be seen as $fg$ where $g$ is the constant function whose value is $c$.
      As shown above, $cf \in C^{\infty}(M)$.
  \end{itemize}
\end{proof}

\begin{customexer}{2.2}
  Let $U$ be an open submanifold of $\mathbb{R}^n$ with its standard smooth manifold structure.
  Show that a function $f: U \rightarrow \mathbb{R}^k$ is smooth in the sense just defined if and only if it is smooth in the sense of ordinary calculus.
  Do the same for an open submanifold with boundary in $\mathbb{H}^n$.
\end{customexer}

\begin{proof}
  $f$ is smooth in the sense just defined if and only if $f \circ \Id^{-1}$ is smooth in the sense of ordinary calculus.
  Since $f \circ \Id^{-1} = f$, $f \circ \Id^{-1}$ is smooth in the sense of ordinary calculus if and only if $f$ is smooth in the sense of ordinary calculus.
\end{proof}

\begin{customexer}{2.3}\label{ex_2_3}
  Let $M$ be a smooth manifold with or without boundary, and suppose $f: M \rightarrow \mathbb{R}^k$ is a smooth function.
  Show that $f \circ \phi^{-1}: \phi(U) \rightarrow \mathbb{R}^k$ is smooth for every smooth chart $(U, \phi)$ for $M$.
\end{customexer}

\begin{proof}
  Let $\phi(x) \in \phi(U)$.
  Since $f$ is smooth, there exists $(V, \psi)$ such that $f \circ \psi^{-1}: \psi(V) \rightarrow \mathbb{R}^k$ is smooth and $x \in V$.
  Let $W = U \cap V$.
  Then $f \circ \psi^{-1}: \psi(W) \rightarrow \mathbb{R}^k$ is smooth and $\psi \circ \phi^{-1}: \phi(W) \rightarrow \psi(W)$ is a diffeomorphism where $\phi(W)$ is a neighborhood of $W$.
  Then the restriction of $f \circ \psi^{-1}$ to $\phi(W)$ is identical to $(f \circ \psi^{-1}) \circ (\psi \circ \phi^{-1})$.
  Since he composition of a smooth function is smooth, $f \circ \psi^{-1}$ is smooth.
\end{proof}

\begin{customexer}{2.7(Prove Proposition 2.5)}
  Suppose $M$ and $N$ are smooth manifolds with or without boundary, and $F: M \rightarrow N$ is a map.
  Then $F$ is smooth if and only if either of the following conditions is satisfied:
  \begin{enumerate}[label=(\alph*)]
    \item 
      For every $p \in M$, there exist smooth charts $(U, \phi)$ containing $p$ and $(V, \psi)$ containing $F(p)$ such that $U \cap F^{-1}(V)$ is open in $M$ and the composite map $\psi \circ F \circ \phi^{-1}$ is smooth from $\phi(U \cap F^{-1}(V))$ to $\psi(V)$.
    \item
      $F$ is continuous and there exist smooth atlases $\{ (U_{\alpha}, \phi_{\alpha}) \}$ and $\{ (V_{\beta}, \psi_{\beta}) \}$ for $M$ and $N$, respectively, such that for each $\alpha$ and $\beta$, $\psi_{\beta} \circ F \circ \phi_{\alpha}^{-1}$ is a smooth map from $\phi_{\alpha}(U_{\alpha} \cap F^{-1}(V_{\beta}))$ to $\psi_{\beta}(V_{\beta})$.
  \end{enumerate}
\end{customexer}

\begin{proof}
  Let $\mathcal{A}_M$ and $\mathcal{A}_N$ be smooth structures of $M$ and $N$.
  Suppose $F$ is smooth.
  By Proposition 2.4, $F$ is continuous.
  For every $p \in M$ there exist coordinate charts $(U_p, \phi_p)$ containing $p$ and $(V_p, \psi_p)$ containing $F(p)$ such that $F(U_p) \subset V_p$ and $\psi_p \circ F_p \circ \phi_p^{-1}$ is smooth from $\phi_p(U_p)$ to $\psi_p(V_p)$.
  Then $\{ (U_p, \phi_p) \mid p \in M \} \subset \mathcal{A}_M$ and $A_n \{ (V_p, \psi_p) \mid p \in M \} \subset \mathcal{A}_N$ are smooth atlases.
  Moreover, for every $(U_p, \phi_p)$ and $(V_q, \psi_q)$, $\psi_q \circ F \circ \phi_p^{-1}$ is a smooth map from $\phi_p(U_p \cap F^{-1}(V_q))$ to $\psi_q(V_q)$ because $\psi_q \circ F \circ \phi^{-1}_p = (\psi_q \circ \psi_p^{-1}) \circ (\psi_p \circ F \circ \phi_p^{-1})$ where $\psi_q \circ \psi_q^{-1}$ and $\psi_p \circ F \circ \phi_p^{-1}$ are smooth.
  Therefore, the definition implies (b).

  (b) implies (a) because if $F$ is continuous, $F^{-1}(V_{\beta})$ is open in $M$ for every $\beta$, so $U \cap F^{-1}(V)$ is open in $M$.

  Finally, we show that (a) implies the definition.
  Suppose $F$ satisfies (a).
  Let $p \in M$.
  Let $(U, \phi) \in \mathcal{A}_M$ and $(V, \psi) \in \mathcal{A}_N$ be smooth charts satisfying the properties described in (a).
  Let $U' = U \cap F^{-1}(V)$ and consider $(U', \phi\mid_{U'})$.
  Then $(U', \phi\mid_{U'}) \in \mathcal{A}_M$ because it must be smoothly compatible with any other smooth coordinate chart in $\mathcal{A}_M$.
  Moreover, $F(U') \subset V$ and $\psi \circ F \circ (\phi\mid_{U'})^{-1}:\phi(U') \rightarrow \psi(V)$ is smooth.
  Therefore, (a) implies the definition.

  Hence, (a), (b) and the definition are all equivalent.
\end{proof}

\begin{customexer}{2.7(Proof of Proposition 2.6)}\label{exercise_2_7}
  Let $M$ and $N$ be smooth manifolds with or without boundary, and let $F: M \rightarrow N$ be a map.
  \begin{enumerate}[label=(\alph*)]
    \item 
      If every point $p \in M$ has a neighborhood $U$ such that the restriction $F\vert_U$ is smooth, then $F$ is smooth.
    \item
      Conversely, if $F$ is smooth, then its restriction to every open subset is smooth.
  \end{enumerate}
\end{customexer}

\begin{proof}
  Let $\mathcal{A}_M, \mathcal{A}_N$ be smooth structures of $M, N$, respectively.
  \begin{enumerate}[label=(\alph*)]
    \item 
      Let $p \in M$.
      Let $U$ be a neighborhood of $p$ such that $F\vert_U$ is smooth.
      By \ref{exercise_1_44}, $U$ is a smooth manifold with the induced smooth structure $\mathcal{A}_U = \{ (V, \phi) \in \mathcal{A}_M \mid V \subset U \}$.
      Since $F\vert_U$ is smooth, there exist $(V, \phi) \in \mathcal{A}_U$ and $(W, \psi) \in \mathcal{A}_N$ such that:
      \begin{itemize}
        \item
          $F\vert_U(V) \subset W$.
        \item
          $\psi \circ F\vert_U \circ \phi^{-1}:\phi(V) \rightarrow \psi(W)$ is smooth.
      \end{itemize}
      Since $V \subset U$, $F(V) \subset W, \psi \circ F \circ \phi^{-1}:\phi(V) \rightarrow \psi(W)$ is smooth, and $(V, \phi) \in \mathcal{A}$.
      Therefore, $F$ is smooth.
    \item
      Let $U \subset M$ be an open subset.
      By \ref{exercise_1_44}, $U$ is a smooth manifold with the induced smooth structure $\mathcal{A}_U = \{ (V, \phi) \in \mathcal{A}_M \mid V \subset U \}$.
      Let $p \in U$.
      Then $p \in F$, so there exist $(V, \phi) \in \mathcal{A}_M, (W, \psi) \i \mathcal{A}_N$ such that $F(V) \subset W$ and $\psi \circ F \circ \phi^{-1}: \phi(V) \rightarrow \psi(W)$ is smooth.
      Then $(V \cap U, \phi\vert_{V \cap U})$ is a chart that is smoothly compatible with every chart in $\mathcal{A}_M$.
      Therefore, $(V \cap U, \phi\vert_{V \cap U}) \in \mathcal{A}_M$.
      Moreover, $\phi\vert_{V \cap U}(V \cap U) \subset \phi(V) \subset W$ and $\psi \circ F \circ (\phi\vert_{V \cap U}(V \cap ))^{-1}$ is clearly smooth.
      Therefore, $F \vert_U$ is smooth.
  \end{enumerate}
\end{proof}

\begin{customexer}{2.9}
  Suppose $F: M \rightarrow N$ is a smooth map between smooth manifolds with or without boundary.
  Show that the coordinate representation of $F$ with respect to \textit{every} pair of smooth charts for $M$ and $N$ is smooth.
\end{customexer}

\begin{proof}
  Let $(M, \mathcal{A}_M), (N, \mathcal{A}_N)$ be smooth manifolds with or without boundary.
  Let $F: M \rightarrow N$ be a smooth map.
  Let $(U, \phi) \in \mathcal{A}_M, (V, \psi) \in \mathcal{A}_N$ be given.
  We must show that $\hat{F} = \psi \circ F \circ \phi^{-1}$ is a smooth function from $\phi(U \cap F^{-1}(V))$ to $\psi(V)$.
  Let $\phi(p) \in \phi(U \cap F^{-1}(V))$.
  Then $p \in M$, so there exist $(U_0, \phi_0) \in \mathcal{A}_M$ and $(V_0, \psi_0) \in \mathcal{A}_N$ such that
  \begin{itemize}
    \item
      $p \in U_0 \subset U \cap F^{-1}(V)$;
    \item
      $\phi_0(U_0) \subset V_0$;
    \item
      $\psi_0 \circ F \circ \phi_0^{-1}:\phi_0(U_0) \rightarrow \psi(V_0)$ is smooth.
  \end{itemize}
  Then $\psi \circ F \circ \phi^{-1} \vert_{\phi(U_0)} = (\psi \circ \psi_0^{-1}) \circ (\psi_0 \circ F \circ \phi_0^{-1}) \circ (\phi_0 \circ \phi)$.
  Since the composition of smooth functions in Euclidean spaces is smooth, $\hat{F}$ is smooth.
\end{proof}

\begin{customexer}{2.11(Proof of Proposition 2.10)}\label{exercise_2_11}
  Let $M, N$ and $P$ be smooth manifolds with or without boundary.
  \begin{enumerate}[label=(\alph*)]
    \item 
      Every constant map $c: M \rightarrow N$ is smooth.
    \item
      The identity map of $M$ is smooth.
    \item
      If $U \subset M$ is an open submanifold with or without boundary, then the inclusion map $U \rightarrow M$ is smooth.
  \end{enumerate}
\end{customexer}

\begin{proof}
  Let $\mathcal{A}_M, \mathcal{A}_N, \mathcal{A}_P$ be smooth structures of $M, N, P$, respectively.
  \begin{enumerate}[label=(\alph*)]
    \item 
      $F$ is clearly continuous.
      Moreover, for every $(U_{\alpha}, \phi_{\alpha}) \in \mathcal{A}_M, (V_{\beta}, \psi_{\beta}) \in \mathcal{A}_N$, $\psi_{\beta} \circ F \circ \phi_{\alpha}^{-1}$ is a constant map, so it is smooth.
      By \ref{exercise_2_7}, $F$ is smooth.
    \item
      Let $p \in M$.
      Choose $(U, \phi) \in \mathcal{A}_M$ such that $p \in U$.
      Then $F(U) \subset U$ and $\phi \circ F \circ \phi^{-1} = \Id_U$, so it is smooth.
      Therefore, $F$ is smooth.
    \item
      By \ref{exercise_1_44}, $\mathcal{A}_U = \{ (V, \phi) \mid V \subset U \}$ is a smooth structure of $U$.
      Let $p \in U$.
      Then $p \in V$ for some $(V, \phi) \in \mathcal{A}_U$.
      Then $(V, \phi) \in \mathcal{A}_M$, trivially.
      Since $F(V) \subset V$ and $\phi \circ F \circ \phi^{-1}$ is simply the identity map on $V$, $F$ is smooth.
  \end{enumerate}
\end{proof}

\begin{customexer}{2.16(Proof of Proposition 2.15)}
  $ $
  \begin{enumerate}[label=(\alph*)]
    \item 
      Every composition of diffeomorphisms is a diffeomorphism.
    \item
      Every finite product of diffeomorphisms between smooth manifolds is a diffeomorphism.
    \item
      Every diffeomorphism is a homeomorphism and an open map.
    \item
      The restriction of a diffeomorphism to an open submanifold with or without boundary is a diffeomorphism onto its image.
    \item
      ``Diffeomorphic" is an equivalence relation on the class of all smooth manifolds with or without boundary.
  \end{enumerate}
\end{customexer}

\begin{customexer}{2.16(Proof of Proposition 2.15)}
  Let $(M, \mathcal{A}_M), (N, \mathcal{A}_N), (P, \mathcal{A}_P)$ be smooth manifolds with or without boundary, and let $F: M \rightarrow N, G: N \rightarrow P$ be diffeomorphisms.
  \begin{enumerate}[label=(\alph*)]
    \item 
      By Proposition 2.10(d), $G \circ F$ and $F^{-1} \circ G^{-1}$ are smooth.
      Then $(G \circ F) \circ (F^{-1} \circ G^{-1})$ and $(F^{-1} \circ G^{-1}) \circ (G \circ F)$ are both the identity map on the corresponding space, so $F^{-1} \circ G^{-1}$ is the smooth inverse of $G \circ F$.
      Therefore, $G \circ F$ is a diffeomorphism.
    \item
      \todo[inline,caption={}]{
        Read Example 1.34(Smooth Product Manifolds)!
      }
    \item
      Proposition 2.4 states that every smooth map is continuous.
      Thus $F$ and $F^{-1}$ are both continuous.
      Therefore, $F$ is a homeomorphism and also an open map.
    \item
      Let $U \subset M$ be an open subset.
      By (\ref{exercise_2_7}), $F\vert_U$ is smooth.
      Since $F$ is a homeomorphism as shown in (c), $F(U)$ is an open subset of $N$.
      Therefore, $F^{-1}\vert_{F(U)}$ is smooth by (\ref{exercise_2_7}).
      Clearly, $F\vert_U$ and $F^{-1}\vert_{F(U)}$ are the inverse of each other.
      Therefore, $F\vert_U$ is a diffeomorphism.
    \item
      By (\ref{exercise_2_11}), the identity map on $M$ is a diffeomorphism, so the reflexive property is satisfied.
      Moreover, $(F^{-1})^{-1} = F$, so the symmetric property is satisfied.
      By (a), the composition of two diffeomorphisms is a diffeomorphism, so the transitive property is satisfied.
      Therefore, ``diffeomorphic" is an equivalence relation.
  \end{enumerate}
\end{customexer}
